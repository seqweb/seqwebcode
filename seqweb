#!/bin/bash
# SeqWeb CLI Entry Point
# This file should be made executable with: chmod +x seqweb

# Set SEQWEB_HOME to the directory containing this script
export SEQWEB_HOME="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Source environment configuration
source "$SEQWEB_HOME/config/env.sh"

# Function to list available commands
list_available_commands() {
    find "$SEQWEB_COMMAND_DIR" -type f -name "*.sh" \
        | sed -E 's|^.*/||' \
        | sed -E 's/\.sh$//' \
        | sort
}

# Function to show usage
show_usage() {
    if [[ -z "$1" ]]; then
        echo "‚ùå Missing command"
    else
        echo "‚ùå Unknown command: $1"
    fi
    echo "  Run 'seqweb help' for a list of available commands"
}

# Main command processing
if [[ $# -eq 0 ]]; then
    echo "üß¨ SeqWeb: OEIS Knowledge Graph Development üß¨"
    show_usage
    exit 1
fi

command=$1
shift

# Source the command file
command_file="$SEQWEB_COMMAND_DIR/${command}.sh"
if [[ ! -f "$command_file" ]]; then
    echo "üß¨ SeqWeb: OEIS Knowledge Graph Development üß¨"
    show_usage "$command"
    exit 1
fi

# Source the command file and execute the command function
source "$command_file"
"seqweb-command-${command}" "$@" 