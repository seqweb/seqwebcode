#!/usr/bin/env python3
"""
SeqWeb Python CLI Implementation entry point
This file is made executable by the Universal entry point via chmod +x
"""

import os
import sys

# Read SEQWEBCODE_PATH from environment and immediately set up Python path
seqwebcode_path = os.environ.get('SEQWEBCODE_PATH')
if seqwebcode_path:
    # Insert the Python source directory into sys.path
    sys.path.insert(0, f"{seqwebcode_path}/src/python")
else:
    print("Error: SEQWEBCODE_PATH environment variable not set")
    sys.exit(1)

# Import modules after path setup
# Note: These imports depend on the sys.path manipulation above
try:
    from libs.core.foothold.foothold import setup_environment  # type: ignore
    from app.cli.seqwebdev.seqwebdev import main  # type: ignore
except ImportError as e:
    print(f"Error importing required modules: {e}")
    sys.exit(1)

# Only run setup if SETUP_CLI environment variable is set
if os.environ.get('SETUP_CLI'):
    setup_environment()

if __name__ == "__main__":
    main()
